"use strict";const textInput=document.querySelector(".js_text_input"),searchButton=document.querySelector(".js_search_btn"),resetButton=document.querySelector(".js_reset_btn"),ulAnimes=document.querySelector(".js_ul_list"),ulFavouriteAnimes=document.querySelector(".js_favourites_list"),resetAllFav=document.querySelector(".js_reset_allfav");let animeList=[],favouriteAnimeList=[];function renderFavourites(){let e="";for(const t of favouriteAnimeList)"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"!==t.images.jpg.image_url?e+=`<li class="js_anime_item item" id="${t.mal_id}"><img class="item-image" src=${t.images.jpg.image_url}><h3 class="item-title">${t.title}</h3><button class="reset_one js_reset_one"><i class="fa-solid fa-trash"></i></button></li>`:e+=`<li class="js_anime_item item" id="${t.mal_id}"><img class="item-image" src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"><h3 class="item-title">${t.title}</h3><button class="reset_one js_reset_one"><i class="fa-solid fa-trash"></i></button></li>`,ulFavouriteAnimes.innerHTML=e}function handleClickFavourites(e){const t=e.currentTarget;t.classList.add("fav_clicked");const i=parseInt(e.currentTarget.id),s=animeList.find(e=>e.mal_id===i),n=favouriteAnimeList.findIndex(e=>e.mal_id===i);-1===n?favouriteAnimeList.push(s):(favouriteAnimeList.splice(n,1),t.classList.remove("fav_clicked")),localStorage.setItem("data",JSON.stringify(favouriteAnimeList)),renderFavourites(),listenerFavourites()}function listenerFavourites(){const e=document.querySelectorAll(".js_anime_item");for(const t of e)t.addEventListener("click",handleClickFavourites)}function renderAnimes(){ulAnimes.innerHTML="";let e="";for(const t of animeList)"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"!==t.images.jpg.image_url?e+=`<li class="js_anime_item item" id="${t.mal_id}"><img class="item-image" src=${t.images.jpg.image_url}><h3 class="item-title">${t.title}</h3></li>`:e+=`<li class="js_anime_item item" id="${t.mal_id}"><img class="item-image" src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"><h3 class="item-title">${t.title}</h3></li>`;ulAnimes.innerHTML=e,listenerFavourites()}function handleSearch(e){e.preventDefault();const t=textInput.value;fetch("https://api.jikan.moe/v4/anime?q="+t).then(e=>e.json()).then(e=>{animeList=e.data,renderAnimes()})}function handleReset(e){e.preventDefault,animeList=[],renderAnimes()}function handleResetAllFav(e){e.preventDefault,favouriteAnimeList=[];ulFavouriteAnimes.innerHTML="",localStorage.removeItem("data")}function onLoad(){const e=JSON.parse(localStorage.getItem("data"));e&&(favouriteAnimeList=e,renderFavourites())}searchButton.addEventListener("click",handleSearch),resetButton.addEventListener("click",handleReset),resetAllFav.addEventListener("click",handleResetAllFav),onLoad();