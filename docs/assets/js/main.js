"use strict";const textInput=document.querySelector(".js_text_input"),searchButton=document.querySelector(".js_search_btn"),resetButton=document.querySelector(".js_reset_btn"),ulAnimes=document.querySelector(".js_ul_list"),ulFavouriteAnimes=document.querySelector(".js_favourites_list"),resetAllFav=document.querySelector(".js_reset_allfav");let animes=[],favourites=[];function renderFavourites(){ulAnimes.innerHTML="";let e="";for(const t of favourites)e+=`<li class="js_anime_item item fav_clicked__inlist" id="${t.mal_id}">`,"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"===t.images.jpg.image_url?e+='<img class="item-image" src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV">':e+=`<img class="item-image" src="${t.images.jpg.image_url}"}">`,e+=`<h3 class="item-title">${t.title}</h3><button id="${t.mal_id}" class="js_reset_one reset_one"><i class="fa-solid fa-trash-can"></i></button></li>`;ulFavouriteAnimes.innerHTML=e,renderAnimes(),listenerFavourites(),listenersResetOne()}function handleClickFavourites(e){const t=parseInt(e.currentTarget.id),i=animes.find(e=>e.mal_id===t),n=favourites.findIndex(e=>e.mal_id===t);-1===n?favourites.push(i):favourites.splice(n,1),localStorage.setItem("data",JSON.stringify(favourites)),renderFavourites()}function listenerFavourites(){const e=document.querySelectorAll(".js_anime_item");for(const t of e)t.addEventListener("click",handleClickFavourites)}function renderAnimes(){ulAnimes.innerHTML="";let e="",t="";for(const i of animes){t=-1!==favourites.findIndex(e=>i.mal_id===e.mal_id)?"--clicked":"--search",e+=`<li class="js_anime_item item item${t}" id="${i.mal_id}">`,"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"===i.images.jpg.image_url?e+='<img class="item-image" src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV">':e+=`<img class="item-image" src="${i.images.jpg.image_url}">`,e+=`<h3 class="item-title">${i.title}</h3></li>`}ulAnimes.innerHTML=e,listenerFavourites()}function handleSearch(e){e.preventDefault();const t=textInput.value;fetch("https://api.jikan.moe/v4/anime?q="+t).then(e=>e.json()).then(e=>{animes=e.data,renderAnimes()})}function handleReset(e){e.preventDefault,animes=[],renderAnimes()}function handleResetAllFav(e){e.preventDefault,favourites=[];ulFavouriteAnimes.innerHTML="",localStorage.removeItem("data")}function handleClickResetOne(e){e.preventDefault}function listenersResetOne(){const e=document.querySelectorAll(".js_reset_one");for(const t of e)t.addEventListener("click",handleClickResetOne)}function onLoad(){const e=JSON.parse(localStorage.getItem("data"));e&&(favourites=e,renderFavourites())}searchButton.addEventListener("click",handleSearch),resetButton.addEventListener("click",handleReset),resetAllFav.addEventListener("click",handleResetAllFav),onLoad();